# Сервис для работы с балансом пользователей

# Сервис реализован на Java с использованием фреймворка Spring Boot и предоставляет HTTP API для взаимодействия с балансом пользователей.

## Инструкции по запуску
### Для запуска приложения с помощью Maven, необходимо выполнить следующие команды в командной строке:

* git clone https://github.com/arsproger/spring-boot-transaction-service.git
* cd project_name
* mvn spring-boot:run
* После запуска приложения, API будет доступно по адресу http://localhost:8080.

# Основное задание
## Реализовал следующие методы для работы с балансом пользователей:

### Метод начисления средств на баланс

* POST /api/users/{userId}/balance/deposit
* Принимает id пользователя и сколько средств зачислить.

### Метод резервирования средств с основного баланса на отдельном счете

* POST /api/users/{userId}/balance/reserve
* Принимает id пользователя, ИД услуги, ИД заказа, стоимость.

### Метод признания выручки

* POST /api/users/{userId}/balance/revenue-recognition
* Списывает из резерва деньги, добавляет данные в отчет для бухгалтерии- Принимает id пользователя, ИД услуги, ИД заказа, сумму.

### Метод получения баланса пользователя

* GET /api/users/{userId}/balance
* Принимает id пользователя.

## Дополнительные задания
### Доп. задание 1: Месячный отчет
* Также реализовал метод для получения месячного отчета, который бухгалтерия запрашивает раз в месяц:

* GET /api/reports/monthly-report?year={year}&month={month}
* На входе метод принимает год и месяц отчетного периода в формате YYYY-MM. 
* На выходе генерируется CSV файл со сводным отчетом по всем пользователям, с указанием сумм выручки по каждой из предоставленной услуги для расчета и уплаты налогов.

### Доп. задание 2: Список транзакций
* Наконец, предоставляю метод для получения списка транзакций с комментариями откуда и зачем были начислены/списаны средства с баланса:

* GET /api/users/{userId}/transactions?sort={sort}&page={page}&size={size}
* Принимает id пользователя, а на выходе выдает историю его транзакций в формате CSV.
